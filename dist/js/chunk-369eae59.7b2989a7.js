(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-369eae59"],{"94a0":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"messaging"},[s("div",{staticClass:"inbox_msg"},[s("div",{staticClass:"inbox_people"},[t._m(0),s("div",{staticClass:"inbox_chat"},t._l(t.contacts,(function(e){return s("div",{key:e,staticClass:"chat_list active_chat"},[s("div",{staticClass:"chat people"},[s("div",{staticClass:"chat_ib"},[s("v-btn",{on:{click:function(s){t.select(e.name),t.fetchMessages()}}},[t._v(" click ")]),s("h5",[t._v(t._s(e.name))])],1)])])})),0)]),s("div",{staticClass:"mesgs"},[s("div",{staticClass:"msg_history"},t._l(t.messages,(function(e){return s("div",{key:e,staticClass:"incoming_msg"},[s("div",{class:[e.author===t.authUser.email?"sent_msg":"received_msg"]},[s("div",{staticClass:"received_withd_msg"},[s("p",[t._v(" "+t._s(e.message))]),s("span",{staticClass:"time_date"},[t._v(t._s(e.createdAt.toDate().getMonth()+"/"+e.createdAt.toDate().getDate()+" "+e.createdAt.toDate().getHours()+":"+e.createdAt.toDate().getMinutes())+"||"+t._s(e.author))])])])])})),0),s("div",{staticClass:"type_msg"},[s("div",{staticClass:"input_msg_write"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"write_msg",attrs:{type:"text",placeholder:"Type a message"},domProps:{value:t.message},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.saveMessage(e)},input:function(e){e.target.composing||(t.message=e.target.value)}}}),t._m(1)])])])])])])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"headind_srch"},[s("div",{staticClass:"recent_heading"},[s("h4",[t._v("Recent")])]),s("div",{staticClass:"srch_bar"},[s("div",{staticClass:"stylish-input-group"},[s("input",{staticClass:"search-bar",attrs:{type:"text",placeholder:"Search"}}),s("span",{staticClass:"input-group-addon"},[s("button",{attrs:{type:"button"}},[s("i",{staticClass:"fa fa-search",attrs:{"aria-hidden":"true"}})])])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"msg_send_btn",attrs:{type:"button"}},[s("i",{staticClass:"fa fa-paper-plane-o",attrs:{"aria-hidden":"true"}})])}],n=s("8aa5"),c=s.n(n),o={name:"Chat",data:function(){return{message:null,messages:[],authUser:{},receipient:"",contacts:[]}},methods:{saveMessage:function(){var t=this;null!=this.message?db.collection("chat").add({message:this.message,author:this.authUser.email,createdAt:new Date,receipient:this.receipient,auth_rec:this.authUser.email.concat(this.receipient).length}).then((function(){t.scrollToBottom()})):alert("Enter message first"),this.message=null},fetchMessages:function(){var t=this;this.receipient?db.collection("chat").where("auth_rec","==",c.a.auth().currentUser.email.concat(this.receipient).length).orderBy("createdAt").onSnapshot((function(e){var s=[];e.forEach((function(t){s.push(t.data())})),t.messages=s,setTimeout((function(){t.scrollToBottom()}),1e3)})):console.log("no receipient")},fetchContacts:function(){var t=this;db.collection("users").doc(c.a.auth().currentUser.uid).collection("contacts").onSnapshot((function(e){var s=[];e.forEach((function(t){s.push(t.data())})),t.contacts=s}))},scrollToBottom:function(){var t=document.querySelector(".msg_history");t.scrollTop=t.scrollHeight},select:function(t){this.receipient=t}},created:function(){var t=this;c.a.auth().onAuthStateChanged((function(e){t.authUser=e||{}})),this.fetchContacts()},beforeRouteEnter:function(t,e,s){s((function(t){c.a.auth().onAuthStateChanged((function(e){e?s():t.$router.push("/login")}))}))}},r=o,l=(s("ffb6"),s("2877")),u=Object(l["a"])(r,a,i,!1,null,"1ec827f4",null);e["default"]=u.exports},f675:function(t,e,s){},ffb6:function(t,e,s){"use strict";var a=s("f675"),i=s.n(a);i.a}}]);
//# sourceMappingURL=chunk-369eae59.7b2989a7.js.map