{"version":3,"sources":["webpack:///./src/Chat.vue?3d31","webpack:///src/Chat.vue","webpack:///./src/Chat.vue?b319","webpack:///./src/Chat.vue","webpack:///./src/Chat.vue?a0c8"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","_l","contact","key","on","$event","select","name","fetchMessages","_v","_s","message","class","author","authUser","email","createdAt","toDate","getMonth","getDate","getHours","getMinutes","directives","rawName","value","expression","attrs","domProps","type","indexOf","_k","keyCode","saveMessage","target","composing","staticRenderFns","component"],"mappings":"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","file":"js/chunk-369eae59.7b2989a7.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"messaging\"},[_c('div',{staticClass:\"inbox_msg\"},[_c('div',{staticClass:\"inbox_people\"},[_vm._m(0),_c('div',{staticClass:\"inbox_chat\"},_vm._l((_vm.contacts),function(contact){return _c('div',{key:contact,staticClass:\"chat_list active_chat\"},[_c('div',{staticClass:\"chat people\"},[_c('div',{staticClass:\"chat_ib\"},[_c('v-btn',{on:{\"click\":function($event){_vm.select(contact.name) ; _vm.fetchMessages()}}},[_vm._v(\" click \")]),_c('h5',[_vm._v(_vm._s(contact.name))])],1)])])}),0)]),_c('div',{staticClass:\"mesgs\"},[_c('div',{staticClass:\"msg_history\"},_vm._l((_vm.messages),function(message){return _c('div',{key:message,staticClass:\"incoming_msg\"},[_c('div',{class:[message.author===_vm.authUser.email?'sent_msg':'received_msg']},[_c('div',{staticClass:\"received_withd_msg\"},[_c('p',[_vm._v(\" \"+_vm._s(message.message))]),_c('span',{staticClass:\"time_date\"},[_vm._v(_vm._s(message.createdAt.toDate().getMonth()+ \"/\" + message.createdAt.toDate().getDate()+ \" \" + message.createdAt.toDate().getHours()+ \":\"+ message.createdAt.toDate().getMinutes())+\"||\"+_vm._s(message.author))])])])])}),0),_c('div',{staticClass:\"type_msg\"},[_c('div',{staticClass:\"input_msg_write\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.message),expression:\"message\"}],staticClass:\"write_msg\",attrs:{\"type\":\"text\",\"placeholder\":\"Type a message\"},domProps:{\"value\":(_vm.message)},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.saveMessage($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.message=$event.target.value}}}),_vm._m(1)])])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"headind_srch\"},[_c('div',{staticClass:\"recent_heading\"},[_c('h4',[_vm._v(\"Recent\")])]),_c('div',{staticClass:\"srch_bar\"},[_c('div',{staticClass:\"stylish-input-group\"},[_c('input',{staticClass:\"search-bar\",attrs:{\"type\":\"text\",\"placeholder\":\"Search\"}}),_c('span',{staticClass:\"input-group-addon\"},[_c('button',{attrs:{\"type\":\"button\"}},[_c('i',{staticClass:\"fa fa-search\",attrs:{\"aria-hidden\":\"true\"}})])])])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"msg_send_btn\",attrs:{\"type\":\"button\"}},[_c('i',{staticClass:\"fa fa-paper-plane-o\",attrs:{\"aria-hidden\":\"true\"}})])}]\n\nexport { render, staticRenderFns }","<template>\n<div class=\"container\">\n<div class=\"messaging\">\n      <div class=\"inbox_msg\">\n        <div class=\"inbox_people\">\n          <div class=\"headind_srch\">\n            <div class=\"recent_heading\">\n              <h4>Recent</h4>\n            </div>\n            <div class=\"srch_bar\">\n              <div class=\"stylish-input-group\">\n                <input type=\"text\" class=\"search-bar\"  placeholder=\"Search\" >\n                <span class=\"input-group-addon\">\n                <button type=\"button\"> <i class=\"fa fa-search\" aria-hidden=\"true\"></i> </button>\n                </span> </div>\n            </div>\n          </div>\n          <div class=\"inbox_chat\">\n            <div v-for=\"contact in contacts\" :key=\"contact\" class=\"chat_list active_chat\">\n              <div class =\"chat people\">\n                <div class =\"chat_ib\">\n                  <v-btn v-on:click=\"select(contact.name) ; fetchMessages()\"> click </v-btn>\n                  <h5>{{contact.name}}</h5>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"mesgs\">\n          <div class=\"msg_history\">\n            <div v-for=\"message in messages\" v-bind:key=\"message\" class=\"incoming_msg\">\n                <div :class=\"[message.author===authUser.email?'sent_msg':'received_msg']\">\n\n                    <div class=\"received_withd_msg\">\n                        <p>               \n                          {{message.message}}</p>\n                        \n                        <span class=\"time_date\">{{message.createdAt.toDate().getMonth()+ \"/\" + message.createdAt.toDate().getDate()+ \" \" + message.createdAt.toDate().getHours()+ \":\"+ message.createdAt.toDate().getMinutes()}}||{{message.author}}</span></div>\n              </div>\n            </div>\n          \n          </div>\n          <div class=\"type_msg\">\n            <div class=\"input_msg_write\">\n              <input @keyup.enter=\"saveMessage\" v-model=\"message\" type=\"text\" class=\"write_msg\" placeholder=\"Type a message\" />\n              <button class=\"msg_send_btn\" type=\"button\"><i class=\"fa fa-paper-plane-o\" aria-hidden=\"true\"></i></button>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      \n      \n      \n    </div>\n</div>\n</template>\n\n<script>\nimport firebase from 'firebase'\nexport default {\n    name: 'Chat',\n\n    data(){\n        return{\n            message:null,\n            messages:[],\n            authUser:{},\n            receipient:\"\",\n            contacts:[]\n        }\n    },\n    methods:{\n        saveMessage(){\n            //save message to firestore\n            if(this.message != null){\n                db.collection('chat').add({\n                message: this.message,\n                author:this.authUser.email,\n                createdAt: new Date(),\n                receipient: this.receipient,\n                auth_rec: this.authUser.email.concat(this.receipient).length\n            }).then(()=>{\n                this.scrollToBottom();\n            }) \n            } else {\n                alert('Enter message first')\n            }\n            this.message = null;\n        },\n        fetchMessages(){\n          if(this.receipient){\n            db.collection('chat').where(\"auth_rec\",\"==\", firebase.auth().currentUser.email.concat(this.receipient).length)\n            .orderBy(\"createdAt\").onSnapshot((querySnapshot)=>{\n                let allMessages = [];\n                querySnapshot.forEach(doc =>{\n                    allMessages.push(doc.data())\n                })\n                this.messages= allMessages;\n\n                setTimeout(()=>{\n                    this.scrollToBottom();\n                },1000);\n            })\n          } else {\n              console.log(\"no receipient\")\n          }\n\n        },\n        fetchContacts(){  \n          db.collection('users').doc(firebase.auth().currentUser.uid)\n            .collection('contacts').onSnapshot((querySnapshot)=>{\n              let allContacts = [];\n              querySnapshot.forEach(doc=>{\n                allContacts.push(doc.data())\n              })\n              this.contacts = allContacts\n            });\n          },\n        scrollToBottom(){\n            let box = document.querySelector('.msg_history')\n            box.scrollTop=box.scrollHeight;\n        },\n        select: function(e){\n          this.receipient = e;\n        }\n    },\n    created(){\n        firebase.auth().onAuthStateChanged(user =>{\n            if(user){\n                this.authUser=user;\n            }else{\n                this.authUser={}\n            }\n        })\n        this.fetchContacts();\n    },\n    beforeRouteEnter(to,from,next){\n        next(vm=>{\n            firebase.auth().onAuthStateChanged(user =>{\n                if(user){\n                    next();\n                }else{\n                    vm.$router.push('/login')\n                }\n            })\n        })\n    }\n}\n</script>\n\n<style scoped>\n.container{max-width:1170px; margin:auto;}\nimg{ max-width:100%;}\n.inbox_people {\n  background: #f8f8f8 none repeat scroll 0 0;\n  float: left;\n  overflow: hidden;\n  width: 40%; border-right:1px solid #c4c4c4;\n}\n.inbox_msg {\n  border: 1px solid #c4c4c4;\n  clear: both;\n  overflow: hidden;\n}\n.top_spac{ margin: 20px 0 0;}\n\n\n.recent_heading {float: left; width:40%;}\n.srch_bar {\n  display: inline-block;\n  text-align: right;\n  width: 60%; padding:\n}\n.headind_srch{ padding:10px 29px 10px 20px; overflow:hidden; border-bottom:1px solid #c4c4c4;}\n\n.recent_heading h4 {\n  color: #05728f;\n  font-size: 21px;\n  margin: auto;\n}\n.srch_bar input{ border:1px solid #cdcdcd; border-width:0 0 1px 0; width:80%; padding:2px 0 4px 6px; background:none;}\n.srch_bar .input-group-addon button {\n  background: rgba(0, 0, 0, 0) none repeat scroll 0 0;\n  border: medium none;\n  padding: 0;\n  color: #707070;\n  font-size: 18px;\n}\n.srch_bar .input-group-addon { margin: 0 0 0 -27px;}\n\n.chat_ib h5{ font-size:15px; color:#464646; margin:0 0 8px 0;}\n.chat_ib h5 span{ font-size:13px; float:right;}\n.chat_ib p{ font-size:14px; color:#989898; margin:auto}\n.chat_img {\n  float: left;\n  width: 11%;\n}\n.chat_ib {\n  float: left;\n  padding: 0 0 0 0px;\n  width: 88%;\n  font-size:30px;\n\n}\n\n.chat_people{ overflow:hidden; clear:both;}\n.chat_list {\n  border-bottom: 1px solid #c4c4c4;\n  margin: 0;\n  padding: 50px 20px 80px;\n}\n.inbox_chat { height: 550px; overflow-y: scroll;}\n\n.active_chat{ background:#ebebeb;}\n\n.incoming_msg_img {\n  display: inline-block;\n  width: 6%;\n}\n.received_msg {\n  display: inline-block;\n  padding: 0 0 0 10px;\n  width: 92%;\n  margin-left:auto;\n  position:relative;\n }\n .received_withd_msg p {\n \t\tmargin-top: auto;\n\t\tmargin-bottom: auto;\n\t\tmargin-left: 10px;\n\t\tborder-radius: 25px;\n\t\tbackground-color: #82ccdd;\n\t\tpadding: 10px;\n\t\tposition: relative;\n}\n.time_date {\n  color: #747474;\n  display: block;\n  font-size: 12px;\n  margin: 8px 0 0;\n}\n.received_withd_msg { width: 57%;}\n.mesgs {\n  padding: 30px 15px 0 25px;\n  width: 60%;\n  display: flex;\n  flex-direction: column;\n}\n\n .sent_msg p {\n\t\tborder-radius: 25px;\n\t\tbackground-color: #ffa41b;\n\t\tpadding: 10px;\n\t\tposition: relative;\n\n}\n.outgoing_msg{ overflow:hidden; margin:26px 0 26px;}\n.sent_msg {\n  display: inline-block;\n  padding: 0 0 0 10px;\n  width: 92%;\n  position:relative;\n  margin-left:250px;\n}\n.input_msg_write input {\n  background: rgba(0, 0, 0, 0) none repeat scroll 0 0;\n  border: medium none;\n  color: #4c4c4c;\n  font-size: 15px;\n  min-height: 48px;\n  width: 100%;\n}\n\n.type_msg {border-top: 1px solid #c4c4c4;position: relative;}\n.msg_send_btn {\n  background: #05728f none repeat scroll 0 0;\n  border: medium none;\n  border-radius: 50%;\n  color: #fff;\n  cursor: pointer;\n  font-size: 17px;\n  height: 33px;\n  position: absolute;\n  right: 0;\n  top: 11px;\n  width: 33px;\n}\n.messaging { padding: 0 0 50px 0;}\n.msg_history {\n  height: 516px;\n  overflow-y: auto;\n}\n\n</style>","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Chat.vue?vue&type=template&id=1ec827f4&scoped=true&\"\nimport script from \"./Chat.vue?vue&type=script&lang=js&\"\nexport * from \"./Chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Chat.vue?vue&type=style&index=0&id=1ec827f4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1ec827f4\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=style&index=0&id=1ec827f4&scoped=true&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=style&index=0&id=1ec827f4&scoped=true&lang=css&\""],"sourceRoot":""}